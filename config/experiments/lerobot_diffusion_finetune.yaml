# Finetune flow-matching / diffusion on LeRobot images (optional text or action conditioning).
# Set data.extra.repo_id to your HF repo or use data.extra.root for local v3 layout.
experiment_name: lerobot_diffusion_finetune
output_dir: ./outputs/lerobot_diffusion_finetune
seed: 42
model:
  name: flow_matching
  extra:
    in_channels: 3
    out_channels: 3
    hidden_dim: 256
    conditioning_dim: 0
    num_blocks: 4
data:
  dataset_name: lerobot_diffusion
  batch_size: 32
  num_workers: 0
  shuffle: true
  drop_last: true
  extra:
    repo_id: lerobot/aloha_mobile_cabinet  # or your-username/your-dataset
    # root: /path/to/local/lerobot/v3  # optional: local path
    image_size: 64
    conditioning: none  # none | text | action
training:
  max_steps: 10000
  gradient_accumulation_steps: 1
  mixed_precision: fp16
  seed: 42
  log_interval: 20
  eval_interval: 500
  checkpoint_interval: 2000
  learning_rate: 1.0e-4
  weight_decay: 0.0
  max_grad_norm: 1.0
